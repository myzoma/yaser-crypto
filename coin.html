<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø©</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-section">
               <h1 style="text-align: right; margin: 0px; color: rgb(255, 215, 0); font-size: 1.5rem;"><br /></h1>
<h2 style="text-align: right; margin: 0px;">
        <font face="arial black" style="" size="6"><i class="fas fa-coins"></i><font color="#00ccff" style=""> YASER</font><span style="color: rgb(255, 215, 0);"> CRYPTO&nbsp; &nbsp;&nbsp;</span></font></h2>
               
            </div>
            <nav class="navigation">
                <ul class="nav-links">
                    <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div id="coinDetails" style="max-width:1100px; margin:30px auto"></div>
        <div style="text-align:center; margin-top:30px">
            <a href="index.html" class="refresh-btn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù…Ù„Ø§Øª</a>
        </div>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
    function getSymbolFromURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('symbol');
    }
    function getRecommendation(coin) {
        const score = coin.score;
        const conditions = coin.conditions ?? {};
        let recommendation = '';
        let riskLevel = '';
        let investmentPercent = '';
        if (score >= 90) {
            recommendation = 'ğŸŸ¢ ØªÙˆØµÙŠØ© Ù‚ÙˆÙŠØ© Ø¨Ø§Ù„Ø´Ø±Ø§Ø¡';
            riskLevel = 'Ù…Ù†Ø®ÙØ¶';
            investmentPercent = '50%';
        } else if (score >= 80) {
            recommendation = 'ğŸŸ¡ ØªÙˆØµÙŠØ© Ø¨Ø§Ù„Ø´Ø±Ø§Ø¡';
            riskLevel = 'Ù…ØªÙˆØ³Ø·';
            investmentPercent = '30%';
        } else if (score >= 75) {
            recommendation = 'ğŸŸ  ÙŠÙ…ÙƒÙ† Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ø­Ø°Ø±';
            riskLevel = 'Ù…ØªÙˆØ³Ø· Ø¥Ù„Ù‰ Ø¹Ø§Ù„ÙŠ';
            investmentPercent = '20%';
        } else if (score >= 60) {
            recommendation = 'âšª Ù…Ø­Ø§ÙŠØ¯ - Ø§Ù†ØªØ¸Ø§Ø±';
            riskLevel = 'Ø¹Ø§Ù„ÙŠ';
            investmentPercent = '10%';
        } else {
            recommendation = 'ğŸ”´ Ù„Ø§ ÙŠÙ†ØµØ­ Ø¨Ø§Ù„Ø´Ø±Ø§Ø¡';
            riskLevel = 'Ø¹Ø§Ù„ÙŠ Ø¬Ø¯Ø§Ù‹';
            investmentPercent = '0%';
        }
        const metConditions = Object.values(conditions).filter(Boolean).length;
        const totalConditions = Object.keys(conditions).length;
        return `
            <div class="recommendation-box">
                <div class="recommendation-title">${recommendation}</div>
                <div class="recommendation-details">
                    <div class="detail-item">
                        <span class="detail-label">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±:</span>
                        <span class="detail-value">${riskLevel}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:</span>
                        <span class="detail-value">${investmentPercent}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø­Ù‚Ù‚Ø©:</span>
                        <span class="detail-value">${metConditions}/${totalConditions}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Ø§Ù„Ù…ØµØ¯Ø±:</span>
                        <span class="detail-value">${coin.priority === 3 ? 'Ù…Ø¤ÙƒØ¯ Ù…Ù† Ù…ØµØ¯Ø±ÙŠÙ† â­' : coin.dataSource?.toUpperCase() ?? ''}</span>
                    </div>
                </div>
            </div>
            <div class="investment-strategy">
                <h4>ğŸ’¡ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±:</h4>
                <ul>
                    <li>Ø§Ø¯Ø®Ù„ Ø¨Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ø£Ùˆ Ø¹Ù†Ø¯ Ø§Ù†Ø®ÙØ§Ø¶ Ø·ÙÙŠÙ</li>
                    <li>Ø¶Ø¹ ÙˆÙ‚Ù Ø§Ù„Ø®Ø³Ø§Ø±Ø© Ø¹Ù†Ø¯: $${coin.targets?.stopLoss?.toFixed(6) ?? '-'}</li>
                    <li>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£ÙˆÙ„: $${coin.targets?.target1?.toFixed(6) ?? '-'} (+${coin.price ? (((coin.targets?.target1 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%)</li>
                    <li>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø«Ø§Ù†ÙŠ: $${coin.targets?.target2?.toFixed(6) ?? '-'} (+${coin.price ? (((coin.targets?.target2 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%)</li>
                    <li>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø«Ø§Ù„Ø«: $${coin.targets?.target3?.toFixed(6) ?? '-'} (+${coin.price ? (((coin.targets?.target3 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%)</li>
                </ul>
            </div>
            <div class="risk-warning">
                <h4>âš ï¸ ØªØ­Ø°ÙŠØ± Ø§Ù„Ù…Ø®Ø§Ø·Ø±:</h4>
                <p>Ø§Ù„ØªØ¯Ø§ÙˆÙ„ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø´ÙØ±Ø© ÙŠÙ†Ø·ÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± Ø¹Ø§Ù„ÙŠØ©. Ù„Ø§ ØªØ³ØªØ«Ù…Ø± Ø£ÙƒØ«Ø± Ù…Ù…Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…Ù„ Ø®Ø³Ø§Ø±ØªÙ‡. Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·.</p>
            </div>
        `;
    }
    function formatNumber(num) {
        if (num >= 1000000000) return (num / 1000000000).toFixed(1) + 'B';
        else if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
        else if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
        return num ? num.toFixed(0) : '-';
    }
    document.addEventListener('DOMContentLoaded', () => {
        const symbol = getSymbolFromURL();
        const coinsData = JSON.parse(localStorage.getItem('yaserCryptoCoins') || "[]");
        const coin = coinsData.find(c => c.symbol === symbol);
        if (!coin) {
            document.getElementById('coinDetails').innerHTML = '<div class="error">Ø§Ù„Ø¹Ù…Ù„Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© Ø£Ùˆ Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯!</div>';
            return;
        }
        const indicators = coin.technicalIndicators ?? {};
        const conditions = coin.conditions ?? {};
        document.getElementById('coinDetails').innerHTML = `
        <div class="modal-content" style="display:block; position:static; box-shadow:none;">
            <div class="modal-header">
                <h2>${coin.rank === 1 ? 'ğŸ¥‡' : coin.rank === 2 ? 'ğŸ¥ˆ' : coin.rank === 3 ? 'ğŸ¥‰' : '#' + coin.rank} ${coin.symbol} ${coin.priority === 3 ? '<span class="priority-badge">â­ Ù…Ø¤ÙƒØ¯ Ù…Ù† Ù…ØµØ¯Ø±ÙŠÙ†</span>' : ''}</h2>
                <div class="source-info">${coin.dataSource === 'binance' ? 'ğŸŸ¡ Binance' : 'ğŸ”µ OKX'}</div>
            </div>
          <div class="modal-content-grid" style="display: flex; justify-content: space-between; align-items: flex-start; padding: 10px 0; border-top: 1px solid #444; border-bottom: 1px solid #444;">
    <!-- Ø§Ù„Ø³Ø¹Ø± Ø¹Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± -->
    <div class="price-section" style="flex: 1; text-align: left;">
        <div class="current-price" style="font-size: 1.5rem; font-weight: bold; color: #00ccff;">
            $${coin.price?.toFixed(6) ?? '-'}
        </div>
        <div class="price-change ${coin.change24h >= 0 ? 'positive' : 'negative'}" style="font-size: 1rem; margin-top: 5px;">
            ${(coin.change24h >= 0 ? '+' : '') + (coin.change24h?.toFixed(2) ?? '-')}%
        </div>
    </div>
        <div class="price-range">
            <div>Ø£Ø¹Ù„Ù‰ 24Ø³: $${coin.high24h?.toFixed(6) ?? '-'}</div>
            <div>Ø£Ù‚Ù„ 24Ø³: $${coin.low24h?.toFixed(6) ?? '-'}</div>
            <div>Ø§Ù„Ø­Ø¬Ù…: ${formatNumber(coin.volume)}</div>
        </div>
    </div>

    <div class="score-section">
        <h3>Ù†Ù‚Ø§Ø· Ø§Ù„ØªØ­Ù„ÙŠÙ„</h3>
        <div class="score-display">
            <div class="score-label">Ù†Ù‚Ø·Ø©</div> <!-- â† ØªÙ… Ø±ÙØ¹Ù‡ ÙÙˆÙ‚ -->
            <div class="score-number">${coin.score}</div>
        </div>
        <div class="rank-info">Ø§Ù„Ù…Ø±ÙƒØ²: ${coin.rank === 1 ? 'ğŸ¥‡' : coin.rank === 2 ? 'ğŸ¥ˆ' : coin.rank === 3 ? 'ğŸ¥‰' : '#' + coin.rank}</div>
    </div>
</div>

            <div class="technical-section">
                <h3>Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ÙÙ†ÙŠØ©</h3>
                <div class="indicators-grid">
                    <div class="indicator-item">
                        <span class="indicator-label">RSI:</span>
                        <span class="indicator-value ${conditions.rsiGood ? 'good' : 'warning'}">${indicators.rsi?.toFixed(1) ?? '-'}</span>
                        <span class="indicator-status">${conditions.rsiGood ? 'âœ…' : 'âš ï¸'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">MFI:</span>
                        <span class="indicator-value ${conditions.mfiHealthy ? 'good' : 'warning'}">${indicators.mfi?.toFixed(1) ?? '-'}</span>
                        <span class="indicator-status">${conditions.mfiHealthy ? 'âœ…' : 'âš ï¸'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">MACD:</span>
                        <span class="indicator-value ${conditions.macdBullish ? 'good' : 'warning'}">${indicators.macd?.toFixed(4) ?? '-'}</span>
                        <span class="indicator-status">${conditions.macdBullish ? 'âœ…' : 'âš ï¸'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">CVD:</span>
                        <span class="indicator-value ${conditions.cvdBullish ? 'good' : 'warning'}">${indicators.cvd?.trend ?? '-'}</span>
                        <span class="indicator-status">${conditions.cvdBullish ? 'âœ…' : 'âš ï¸'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">EMA20:</span>
                        <span class="indicator-value">${indicators.ema20?.toFixed(6) ?? '-'}</span>
                        <span class="indicator-status">${conditions.priceAboveEMA ? 'âœ…' : 'âš ï¸'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">Parabolic SAR:</span>
                        <span class="indicator-value">${indicators.parabolicSAR?.toFixed(6) ?? '-'}</span>
                        <span class="indicator-status">ğŸ“Š</span>
                    </div>
                </div>
            </div>
            <div class="targets-section">
                <h3>ğŸ¯ Ù…Ø³ØªÙˆÙŠØ§Øª ÙÙŠØ¨ÙˆÙ†Ø§ØªØ´ÙŠ</h3>
                <div class="targets-grid">
                    <div class="target-item target-1">
                        <span class="target-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„:</span>
                        <span class="target-value">$${coin.targets?.target1?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">+${coin.price ? (((coin.targets?.target1 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                    <div class="target-item target-2">
                        <span class="target-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ:</span>
                        <span class="target-value">$${coin.targets?.target2?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">+${coin.price ? (((coin.targets?.target2 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                    <div class="target-item target-3">
                        <span class="target-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø«:</span>
                        <span class="target-value">$${coin.targets?.target3?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">+${coin.price ? (((coin.targets?.target3 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                    <div class="target-item stop-loss">
                        <span class="target-label">ğŸ›‘ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø§Ø¨Ø¹:</span>
                        <span class="target-value">$${coin.targets?.stopLoss?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">${coin.price ? (((coin.targets?.stopLoss - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                </div>
            </div>
            <div class="conditions-section">
                <h3>Ø´Ø±ÙˆØ· Ø§Ù„ØªØ­Ù„ÙŠÙ„</h3>
                <div class="conditions-grid">
                    <div class="condition-item ${conditions.rsiGood ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.rsiGood ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">RSI ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØµØ­ÙŠØ©</span>
                    </div>
                    <div class="condition-item ${conditions.macdBullish ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.macdBullish ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">MACD ÙÙŠ Ø§ØªØ¬Ø§Ù‡ ØµØ§Ø¹Ø¯</span>
                    </div>
                    <div class="condition-item ${conditions.mfiHealthy ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.mfiHealthy ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">ØªØ¯ÙÙ‚ Ù†Ù‚Ø¯ÙŠ ØµØ­ÙŠ</span>
                    </div>
                    <div class="condition-item ${conditions.cvdBullish ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.cvdBullish ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">Ø­Ø¬Ù… Ø§Ù„ØªØ¯Ø§ÙˆÙ„ ØµØ§Ø¹Ø¯</span>
                    </div>
                    <div class="condition-item ${conditions.priceAboveEMA ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.priceAboveEMA ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">Ø§Ù„Ø³Ø¹Ø± ÙÙˆÙ‚ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…ØªØ­Ø±Ùƒ</span>
                    </div>
                    <div class="condition-item ${conditions.volumeGood ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.volumeGood ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">Ø­Ø¬Ù… ØªØ¯Ø§ÙˆÙ„ ÙƒØ§ÙÙŠ</span>
                    </div>
                    <div class="condition-item ${conditions.changePositive ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.changePositive ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">ØªØºÙŠÙŠØ± Ø¥ÙŠØ¬Ø§Ø¨ÙŠ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©</span>
                    </div>
                    <div class="condition-item ${conditions.multiSource ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.multiSource ? 'âœ…' : 'âŒ'}</span>
                        <span class="condition-text">Ù…Ø¤ÙƒØ¯ Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…ØªØ¹Ø¯Ø¯Ø©</span>
                    </div>
                </div>
            </div>
            <div class="recommendation-section">
                <h3>Ø§Ù„ØªÙˆØµÙŠØ©</h3>
                <div class="recommendation-content">
                    ${getRecommendation(coin)}
                </div>
            </div>
            <div class="modal-footer">
                <div class="data-source">
                    <small>Ù…ØµØ¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${coin.dataSource === 'binance' ? 'ğŸŸ¡ Binance' : 'ğŸ”µ OKX'} | Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleString('ar-SA')}</small>
                </div>
            </div>
        </div>
        `;
    });
    </script>
</body>
</html>
