<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุชูุงุตูู ุงูุนููุฉ</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-section">
               <h1 style="text-align: right; margin: 0px; color: rgb(255, 215, 0); font-size: 1.5rem;"><br /></h1>
<h2 style="text-align: right; margin: 0px;">
        <font face="arial black" style="" size="6"><i class="fas fa-coins"></i><font color="#00ccff" style=""> YASER</font><span style="color: rgb(255, 215, 0);"> CRYPTO&nbsp; &nbsp;&nbsp;</span></font></h2>
               
            </div>
            <nav class="navigation">
                <ul class="nav-links">
                    <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <div id="coinDetails" style="max-width:1100px; margin:30px auto"></div>
        <div style="text-align:center; margin-top:30px">
            <a href="index.html" class="refresh-btn">ุงูุนูุฏุฉ ูุชุฑุชูุจ ุงูุนููุงุช</a>
        </div>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    <script>
    function getSymbolFromURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('symbol');
    }
    function getRecommendation(coin) {
        const score = coin.score;
        const conditions = coin.conditions ?? {};
        let recommendation = '';
        let riskLevel = '';
        let investmentPercent = '';
        if (score >= 90) {
            recommendation = '๐ข ุชูุตูุฉ ูููุฉ ุจุงูุดุฑุงุก';
            riskLevel = 'ููุฎูุถ';
            investmentPercent = '50%';
        } else if (score >= 80) {
            recommendation = '๐ก ุชูุตูุฉ ุจุงูุดุฑุงุก';
            riskLevel = 'ูุชูุณุท';
            investmentPercent = '30%';
        } else if (score >= 75) {
            recommendation = '๐ ูููู ุงูุดุฑุงุก ุจุญุฐุฑ';
            riskLevel = 'ูุชูุณุท ุฅูู ุนุงูู';
            investmentPercent = '20%';
        } else if (score >= 60) {
            recommendation = 'โช ูุญุงูุฏ - ุงูุชุธุงุฑ';
            riskLevel = 'ุนุงูู';
            investmentPercent = '10%';
        } else {
            recommendation = '๐ด ูุง ููุตุญ ุจุงูุดุฑุงุก';
            riskLevel = 'ุนุงูู ุฌุฏุงู';
            investmentPercent = '0%';
        }
        const metConditions = Object.values(conditions).filter(Boolean).length;
        const totalConditions = Object.keys(conditions).length;
        return `
            <div class="recommendation-box">
                <div class="recommendation-title">${recommendation}</div>
                <div class="recommendation-details">
                    <div class="detail-item">
                        <span class="detail-label">ูุณุชูู ุงููุฎุงุทุฑ:</span>
                        <span class="detail-value">${riskLevel}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ูุณุจุฉ ุงูุงุณุชุซูุงุฑ ุงูููุชุฑุญุฉ:</span>
                        <span class="detail-value">${investmentPercent}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ุงูุดุฑูุท ุงููุญููุฉ:</span>
                        <span class="detail-value">${metConditions}/${totalConditions}</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">ุงููุตุฏุฑ:</span>
                        <span class="detail-value">${coin.priority === 3 ? 'ูุคูุฏ ูู ูุตุฏุฑูู โญ' : coin.dataSource?.toUpperCase() ?? ''}</span>
                    </div>
                </div>
            </div>
            <div class="investment-strategy">
                <h4>๐ก ุงุณุชุฑุงุชูุฌูุฉ ุงูุงุณุชุซูุงุฑ:</h4>
                <ul>
                    <li>ุงุฏุฎู ุจุงูุณุนุฑ ุงูุญุงูู ุฃู ุนูุฏ ุงูุฎูุงุถ ุทููู</li>
                    <li>ุถุน ููู ุงูุฎุณุงุฑุฉ ุนูุฏ: $${coin.targets?.stopLoss?.toFixed(6) ?? '-'}</li>
                    <li>ุงููุฏู ุงูุฃูู: $${coin.targets?.target1?.toFixed(6) ?? '-'} (+${coin.price ? (((coin.targets?.target1 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%)</li>
                    <li>ุงููุฏู ุงูุซุงูู: $${coin.targets?.target2?.toFixed(6) ?? '-'} (+${coin.price ? (((coin.targets?.target2 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%)</li>
                    <li>ุงููุฏู ุงูุซุงูุซ: $${coin.targets?.target3?.toFixed(6) ?? '-'} (+${coin.price ? (((coin.targets?.target3 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%)</li>
                </ul>
            </div>
            <div class="risk-warning">
                <h4>โ๏ธ ุชุญุฐูุฑ ุงููุฎุงุทุฑ:</h4>
                <p>ุงูุชุฏุงูู ูู ุงูุนููุงุช ุงููุดูุฑุฉ ููุทูู ุนูู ูุฎุงุทุฑ ุนุงููุฉ. ูุง ุชุณุชุซูุฑ ุฃูุซุฑ ููุง ููููู ุชุญูู ุฎุณุงุฑุชู. ูุฐุง ุงูุชุญููู ูุฃุบุฑุงุถ ุชุนููููุฉ ููุท.</p>
            </div>
        `;
    }
    function formatNumber(num) {
        if (num >= 1000000000) return (num / 1000000000).toFixed(1) + 'B';
        else if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
        else if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
        return num ? num.toFixed(0) : '-';
    }
    document.addEventListener('DOMContentLoaded', () => {
        const symbol = getSymbolFromURL();
        const coinsData = JSON.parse(localStorage.getItem('yaserCryptoCoins') || "[]");
        const coin = coinsData.find(c => c.symbol === symbol);
        if (!coin) {
            document.getElementById('coinDetails').innerHTML = '<div class="error">ุงูุนููุฉ ุบูุฑ ููุฌูุฏุฉ ุฃู ูู ูุชู ุชุญููู ุงูุจูุงูุงุช ุจุนุฏ!</div>';
            return;
        }
        const indicators = coin.technicalIndicators ?? {};
        const conditions = coin.conditions ?? {};
        document.getElementById('coinDetails').innerHTML = `
        <div class="modal-content" style="display:block; position:static; box-shadow:none;">
            <div class="modal-header">
                <h2>${coin.rank === 1 ? '๐ฅ' : coin.rank === 2 ? '๐ฅ' : coin.rank === 3 ? '๐ฅ' : '#' + coin.rank} ${coin.symbol} ${coin.priority === 3 ? '<span class="priority-badge">โญ ูุคูุฏ ูู ูุตุฏุฑูู</span>' : ''}</h2>
                <div class="source-info">${coin.dataSource === 'binance' ? '๐ก Binance' : '๐ต OKX'}</div>
            </div>
            <div class="modal-content-grid">
                <div class="price-section">
                    <h3>ูุนูููุงุช ุงูุณุนุฑ</h3>
                    <div class="price-info">
                        <div class="current-price">$${coin.price?.toFixed(6) ?? '-'}</div>
                        <div class="price-change ${coin.change24h >= 0 ? 'positive' : 'negative'}">
                            ${(coin.change24h >= 0 ? '+' : '') + (coin.change24h?.toFixed(2) ?? '-')}%
                        </div>
                    </div>
                    <div class="price-range">
                        <div>ุฃุนูู 24ุณ: $${coin.high24h?.toFixed(6) ?? '-'}</div>
                        <div>ุฃูู 24ุณ: $${coin.low24h?.toFixed(6) ?? '-'}</div>
                        <div>ุงูุญุฌู: ${formatNumber(coin.volume)}</div>
                    </div>
                </div>
                <div class="score-section">
                    <h3>ููุงุท ุงูุชุญููู</h3>
                    <div class="score-display">
                        <div class="score-number">${coin.score}</div>
                        <div class="score-label">ููุทุฉ</div>
                    </div>
                    <div class="rank-info">ุงููุฑูุฒ: ${coin.rank === 1 ? '๐ฅ' : coin.rank === 2 ? '๐ฅ' : coin.rank === 3 ? '๐ฅ' : '#' + coin.rank}</div>
                </div>
            </div>
            <div class="technical-section">
                <h3>ุงููุคุดุฑุงุช ุงููููุฉ</h3>
                <div class="indicators-grid">
                    <div class="indicator-item">
                        <span class="indicator-label">RSI:</span>
                        <span class="indicator-value ${conditions.rsiGood ? 'good' : 'warning'}">${indicators.rsi?.toFixed(1) ?? '-'}</span>
                        <span class="indicator-status">${conditions.rsiGood ? 'โ' : 'โ๏ธ'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">MFI:</span>
                        <span class="indicator-value ${conditions.mfiHealthy ? 'good' : 'warning'}">${indicators.mfi?.toFixed(1) ?? '-'}</span>
                        <span class="indicator-status">${conditions.mfiHealthy ? 'โ' : 'โ๏ธ'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">MACD:</span>
                        <span class="indicator-value ${conditions.macdBullish ? 'good' : 'warning'}">${indicators.macd?.toFixed(4) ?? '-'}</span>
                        <span class="indicator-status">${conditions.macdBullish ? 'โ' : 'โ๏ธ'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">CVD:</span>
                        <span class="indicator-value ${conditions.cvdBullish ? 'good' : 'warning'}">${indicators.cvd?.trend ?? '-'}</span>
                        <span class="indicator-status">${conditions.cvdBullish ? 'โ' : 'โ๏ธ'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">EMA20:</span>
                        <span class="indicator-value">${indicators.ema20?.toFixed(6) ?? '-'}</span>
                        <span class="indicator-status">${conditions.priceAboveEMA ? 'โ' : 'โ๏ธ'}</span>
                    </div>
                    <div class="indicator-item">
                        <span class="indicator-label">Parabolic SAR:</span>
                        <span class="indicator-value">${indicators.parabolicSAR?.toFixed(6) ?? '-'}</span>
                        <span class="indicator-status">๐</span>
                    </div>
                </div>
            </div>
            <div class="targets-section">
                <h3>๐ฏ ูุณุชููุงุช ููุจููุงุชุดู</h3>
                <div class="targets-grid">
                    <div class="target-item target-1">
                        <span class="target-label">ุงููุณุชูู ุงูุฃูู:</span>
                        <span class="target-value">$${coin.targets?.target1?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">+${coin.price ? (((coin.targets?.target1 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                    <div class="target-item target-2">
                        <span class="target-label">ุงููุณุชูู ุงูุซุงูู:</span>
                        <span class="target-value">$${coin.targets?.target2?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">+${coin.price ? (((coin.targets?.target2 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                    <div class="target-item target-3">
                        <span class="target-label">ุงููุณุชูู ุงูุซุงูุซ:</span>
                        <span class="target-value">$${coin.targets?.target3?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">+${coin.price ? (((coin.targets?.target3 - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                    <div class="target-item stop-loss">
                        <span class="target-label">๐ ุงููุณุชูู ุงูุฑุงุจุน:</span>
                        <span class="target-value">$${coin.targets?.stopLoss?.toFixed(6) ?? '-'}</span>
                        <span class="target-percent">${coin.price ? (((coin.targets?.stopLoss - coin.price) / coin.price) * 100).toFixed(2) : '-'}%</span>
                    </div>
                </div>
            </div>
            <div class="conditions-section">
                <h3>ุดุฑูุท ุงูุชุญููู</h3>
                <div class="conditions-grid">
                    <div class="condition-item ${conditions.rsiGood ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.rsiGood ? 'โ' : 'โ'}</span>
                        <span class="condition-text">RSI ูู ุงูููุทูุฉ ุงูุตุญูุฉ</span>
                    </div>
                    <div class="condition-item ${conditions.macdBullish ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.macdBullish ? 'โ' : 'โ'}</span>
                        <span class="condition-text">MACD ูู ุงุชุฌุงู ุตุงุนุฏ</span>
                    </div>
                    <div class="condition-item ${conditions.mfiHealthy ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.mfiHealthy ? 'โ' : 'โ'}</span>
                        <span class="condition-text">ุชุฏูู ููุฏู ุตุญู</span>
                    </div>
                    <div class="condition-item ${conditions.cvdBullish ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.cvdBullish ? 'โ' : 'โ'}</span>
                        <span class="condition-text">ุญุฌู ุงูุชุฏุงูู ุตุงุนุฏ</span>
                    </div>
                    <div class="condition-item ${conditions.priceAboveEMA ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.priceAboveEMA ? 'โ' : 'โ'}</span>
                        <span class="condition-text">ุงูุณุนุฑ ููู ุงููุชูุณุท ุงููุชุญุฑู</span>
                    </div>
                    <div class="condition-item ${conditions.volumeGood ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.volumeGood ? 'โ' : 'โ'}</span>
                        <span class="condition-text">ุญุฌู ุชุฏุงูู ูุงูู</span>
                    </div>
                    <div class="condition-item ${conditions.changePositive ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.changePositive ? 'โ' : 'โ'}</span>
                        <span class="condition-text">ุชุบููุฑ ุฅูุฌุงุจู ุฎูุงู 24 ุณุงุนุฉ</span>
                    </div>
                    <div class="condition-item ${conditions.multiSource ? 'met' : 'not-met'}">
                        <span class="condition-icon">${conditions.multiSource ? 'โ' : 'โ'}</span>
                        <span class="condition-text">ูุคูุฏ ูู ูุตุงุฏุฑ ูุชุนุฏุฏุฉ</span>
                    </div>
                </div>
            </div>
            <div class="recommendation-section">
                <h3>ุงูุชูุตูุฉ</h3>
                <div class="recommendation-content">
                    ${getRecommendation(coin)}
                </div>
            </div>
            <div class="modal-footer">
                <div class="data-source">
                    <small>ูุตุฏุฑ ุงูุจูุงูุงุช: ${coin.dataSource === 'binance' ? '๐ก Binance' : '๐ต OKX'} | ุขุฎุฑ ุชุญุฏูุซ: ${new Date().toLocaleString('ar-SA')}</small>
                </div>
            </div>
        </div>
        `;
    });
    </script>
</body>
</html>
