<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UT Bot Scanner - ูุธุงู ุงูุฅุดุงุฑุงุช ุงููุฌูู ุงูุฐูู</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-container">
            <div class="header-content">
                <div class="logo-section">
                    <h1 class="logo-title">๐ฅ UT Bot Scanner</h1>
                    <p class="logo-subtitle">ูุธุงู ุงูุฅุดุงุฑุงุช ุงููุฌูู ุงูุฐูู</p>
                    <div class="features-tags">
                        <span class="feature-tag">ATR ุนููู</span>
                        <span class="feature-tag">RSI ุฐูู</span>
                        <span class="feature-tag">ุชุญููู ุงูุญุฌู</span>
                    </div>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <div class="stat-icon">๐</div>
                        <div class="stat-content">
                            <span class="stat-label">ุงูุฅุดุงุฑุงุช ุงููุดุทุฉ</span>
                            <span class="stat-value" id="activeSignals">0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">๐ข</div>
                        <div class="stat-content">
                            <span class="stat-label">ุฅุดุงุฑุงุช ุงูุดุฑุงุก</span>
                            <span class="stat-value" id="buySignals">0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">๐ด</div>
                        <div class="stat-content">
                            <span class="stat-label">ุฅุดุงุฑุงุช ุงูุจูุน</span>
                            <span class="stat-value" id="sellSignals">0</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">โฐ</div>
                        <div class="stat-content">
                            <span class="stat-label">ุขุฎุฑ ุชุญุฏูุซ</span>
                            <span class="stat-value" id="lastUpdate">--:--</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="scan-status" id="scanStatus">
                <div class="status-indicator ready"></div>
                <span>ุฌุงูุฒ ูููุญุต</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Control Panel -->
            <div class="control-panel">
                <button class="scan-btn" id="manualScanBtn" onclick="manualScan()">
                    ๐ ูุญุต ูุฏูู
                </button>
                <div class="auto-scan-info">
                    <span>ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู 12 ุฏูููุฉ</span>
                </div>
            </div>

            <!-- Signals Grid -->
            <div class="signals-section">
                <h2 class="section-title">๐ฏ ุฃูุถู ุงูุฅุดุงุฑุงุช ุงููุฌููุฉ</h2>
                <div class="signals-grid" id="utBotSignals">
                    <!-- ุงูุจุทุงูุงุช ุณุชุธูุฑ ููุง -->
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <p>๐ UT Bot Scanner ุงููุฌูู ุงูุฐูู - ุชุญููู ูุชูุฏู ููุนููุงุช ุงูุฑูููุฉ</p>
            <div class="footer-features">
                <span>โ ุญุณุงุจ ATR ุนููู ุฏููู</span>
                <span>โ ุชุญููู ููุฉ ุฅุดุงุฑุฉ UT Bot</span>
                <span>โ ูุคุดุฑ RSI ููุชุดุจุน</span>
                <span>โ ุชุญููู ุงูุญุฌู ูุงูุณูููุฉ</span>
            </div>
        </div>
    </footer>

    <script src="utbot-scanner.js"></script>
    <script>
        // ุฏุงูุฉ ุงููุญุต ุงููุฏูู
        async function manualScan() {
            const btn = document.getElementById('manualScanBtn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = 'โณ ุฌุงุฑู ุงููุญุต...';
            btn.disabled = true;
            
            try {
                await loadUTBotSignals();
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        // ุชุญุฏูุซ ุญุงูุฉ ุงููุญุต
        function updateScanStatus(status, message) {
            const statusElement = document.getElementById('scanStatus');
            const indicator = statusElement.querySelector('.status-indicator');
            const text = statusElement.querySelector('span');
            
            indicator.className = `status-indicator ${status}`;
            text.textContent = message;
        }

        // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ูู ุงูููุฏุฑ
        function updateHeaderStats(signals) {
            const buyCount = signals.filter(s => s.type === 'BUY').length;
            const sellCount = signals.filter(s => s.type === 'SELL').length;
            const now = new Date();
            
            document.getElementById('activeSignals').textContent = signals.length;
            document.getElementById('buySignals').textContent = buyCount;
            document.getElementById('sellSignals').textContent = sellCount;
            document.getElementById('lastUpdate').textContent = 
                now.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit' });
        }

        // ุชุนุฏูู ุฏุงูุฉ loadUTBotSignals ุงูุฃุตููุฉ
        const originalLoadFunction = loadUTBotSignals;
        loadUTBotSignals = async function() {
            updateScanStatus('scanning', 'ุฌุงุฑู ุงููุญุต...');
            
            try {
                await originalLoadFunction();
                
                // ุงูุญุตูู ุนูู ุงูุฅุดุงุฑุงุช ูู DOM ูุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
                const signalElements = document.querySelectorAll('.buy-signal-item, .sell-signal-item');
                const signals = Array.from(signalElements).map(el => ({
                    type: el.classList.contains('buy-signal-item') ? 'BUY' : 'SELL'
                }));
                
                updateHeaderStats(signals);
                updateScanStatus('ready', 'ุฌุงูุฒ ูููุญุต');
                
            } catch (error) {
                updateScanStatus('error', 'ุฎุทุฃ ูู ุงููุญุต');
                console.error('ุฎุทุฃ ูู ุงููุญุต:', error);
            }
        };
    </script>
</body>
</html>
